diff --git a/generator/main.go b/generator/main.go
index 168760b..d8f4c85 100644
--- a/generator/main.go
+++ b/generator/main.go
@@ -19,11 +19,11 @@ import (
 	"path/filepath"
 	"strings"
 
-	"github.com/alecthomas/kingpin/v2"
 	"github.com/go-kit/log"
 	"github.com/go-kit/log/level"
 	"github.com/prometheus/common/promlog"
 	"github.com/prometheus/common/promlog/flag"
+	"gopkg.in/alecthomas/kingpin.v2"
 	"gopkg.in/yaml.v2"
 
 	"github.com/prometheus/snmp_exporter/config"
diff --git a/main.go b/main.go
index 0cc13f1..df55405 100644
--- a/main.go
+++ b/main.go
@@ -22,6 +22,7 @@ import (
 	"strings"
 	"sync"
 	"syscall"
+	"unsafe"
 
 	"github.com/alecthomas/kingpin/v2"
 	"github.com/go-kit/log"
@@ -34,12 +35,16 @@ import (
 	"github.com/prometheus/common/version"
 	"github.com/prometheus/exporter-toolkit/web"
 	webflag "github.com/prometheus/exporter-toolkit/web/kingpinflag"
+	gopkg_kingpin "gopkg.in/alecthomas/kingpin.v2"
 	yaml "gopkg.in/yaml.v2"
 
 	"github.com/prometheus/snmp_exporter/collector"
 	"github.com/prometheus/snmp_exporter/config"
 )
 
+var gopkg_kingpin_CommandLine =
+	(*gopkg_kingpin.Application)(unsafe.Pointer(kingpin.CommandLine))
+
 const (
 	namespace = "snmp"
 )
@@ -182,7 +187,7 @@ func (sc *SafeConfig) ReloadConfig(configFile []string) (err error) {
 
 func main() {
 	promlogConfig := &promlog.Config{}
-	flag.AddFlags(kingpin.CommandLine, promlogConfig)
+	flag.AddFlags(gopkg_kingpin_CommandLine, promlogConfig)
 	kingpin.Version(version.Print("snmp_exporter"))
 	kingpin.HelpFlag.Short('h')
 	kingpin.Parse()
