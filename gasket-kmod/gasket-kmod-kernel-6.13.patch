From 41177196ab9578a15befbda2cc7c101c8bc6989f Mon Sep 17 00:00:00 2001
From: Nicola Ferralis <feranick@hotmail.com>
Date: Mon, 4 Aug 2025 15:07:47 -0400
Subject: [PATCH] Further compatibility fixes with Kernel 6.13+

diff --git a/src/gasket_core.c b/src/gasket_core.c
index b1c2726..4e5ad8c 100644
--- a/src/gasket_core.c
+++ b/src/gasket_core.c
@@ -1373,7 +1373,7 @@ static long gasket_ioctl(struct file *filp, uint cmd, ulong arg)
 /* File operations for all Gasket devices. */
 static const struct file_operations gasket_file_ops = {
 	.owner = THIS_MODULE,
-	.llseek = no_llseek,
+	.llseek = noop_llseek,
 	.mmap = gasket_mmap,
 	.open = gasket_open,
 	.release = gasket_release,
diff --git a/src/gasket_page_table.c b/src/gasket_page_table.c
index c9067cb..c1f04b4 100644
--- a/src/gasket_page_table.c
+++ b/src/gasket_page_table.c
@@ -54,8 +54,12 @@
 #include <linux/vmalloc.h>
 
 #if __has_include(<linux/dma-buf.h>)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 13, 0)
+MODULE_IMPORT_NS("DMA_BUF");
+#else
 MODULE_IMPORT_NS(DMA_BUF);
 #endif
+#endif
 
 #include "gasket_constants.h"
 #include "gasket_core.h"
